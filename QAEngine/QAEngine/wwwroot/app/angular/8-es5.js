function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{S0rc:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var s=i("mrSG"),o=i("Usal"),r=i("zIGt"),a=i("YaUu"),n=i("t+rW"),c=i("pdjO"),d=i("fXoL"),l=i("ZHT1"),u=i("jyKJ"),h=i("nD3/"),b=i("LEd3"),p=i("mbCC"),f=i("tyNb"),v=i("Hjmt"),m=i("kwlv"),g=i("ofXK"),S=i("RDfn"),A=i("+kG/");function y(e,t){1&e&&(d.Sb(0,"div"),d.Sb(1,"h2",1),d.Gc(2,"Access Denied"),d.Rb(),d.Rb())}function O(e,t){1&e&&d.Nb(0,"app-loader")}function R(e,t){if(1&e){var i=d.Tb();d.Sb(0,"dynamic-modal-form",9),d.ec("OnSubmit",(function(e){return d.xc(i),d.gc(2).SubmitForm(e)})),d.Rb()}if(2&e){var s=d.gc(2);d.nc("controls",s.controls)("showLoader",s.showLoader)("showCancel",!1)("showModal",!1)("submitText",s.submitText)}}function w(e,t){if(1&e&&(d.Sb(0,"div"),d.Sb(1,"div",2),d.Sb(2,"div",3),d.Sb(3,"div",4),d.Sb(4,"div",5),d.Sb(5,"h4",6),d.Gc(6),d.Rb(),d.Rb(),d.Sb(7,"div",7),d.Ec(8,O,1,0,"app-loader",0),d.Ec(9,R,1,5,"dynamic-modal-form",8),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&e){var i=d.gc();d.zb(6),d.Hc(i.formHeading),d.zb(2),d.nc("ngIf",i.showLoader),d.zb(1),d.nc("ngIf",!i.showLoader)}}var I=function(){var e=function(){function e(t,i,s,o,r,a,n,c,d,l){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=s,this.coreActions=o,this.actions=r,this.route=a,this.permission=n,this.formService=c,this.router=d,this.categoryDataService=l,this.isAdmin=!0,this.route_path="/qa/",this.RecordID=0,this.controls=[],this.showLoader=!1,this.formHeading="Ask Question",this.submitText="Submit",this.IsLoaded=!1,this.Categories=[],this.Auth={},this.isAccessGranted=!1,this.isActionGranded=!1,this.Settings={}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.settings$.subscribe((function(t){e.Settings=t})),this.auth$.subscribe((function(t){if(e.Auth=t,e.isAdmin){e.permission.GrandResourceAccess(!1,"1521395965196","1521396022188",t.Role)&&(e.isAccessGranted=!0,e.permission.GrandResourceAction("1521395965196",t.Role)&&(e.isActionGranded=!0))}else e.isAccessGranted=!0,e.isActionGranded=!0})),this.route.params.subscribe((function(t){e.RecordID=e.coreService.decrypt(t.id),isNaN(e.RecordID)&&(e.RecordID=0),e.RecordID>0?(e.formHeading="Update Information",e.submitText="Save Changes",e.Initialize()):e.initializeControls(e.settingService.getInitObject())})),this.categories$.subscribe((function(t){t.length>0?(e.Categories=t,e.updateCategories()):(e.showLoader=!0,e.categoryDataService.LoadDropdownCategories(11))})),this.dropdown_categories$.subscribe((function(t){t.length>0&&(e.Categories=t,e.updateCategories()),e.showLoader=!1})),this.isloaded$.subscribe((function(t){e.IsLoaded=t,e.IsLoaded||e.Redirect()}))}},{key:"Initialize",value:function(){var e=this;this.RecordID>0?this.isAdmin?this.LoadInfo():this.dataService.Authorize_Author({id:this.RecordID,userid:this.Auth.User.id}).subscribe((function(t){t.isaccess?e.LoadInfo():e.Redirect()}),(function(t){e.Redirect()})):this.Redirect()}},{key:"Redirect",value:function(){this.router.navigate([this.route_path])}},{key:"LoadInfo",value:function(){var e=this;this.showLoader=!0,this.dataService.GetInfo(this.RecordID).subscribe((function(t){"success"===t.status?e.initializeControls(t.post):(e.coreActions.Notify({title:t.message,text:"",css:"bg-error"}),e.initializeControls(e.settingService.getInitObject())),e.showLoader=!1}))}},{key:"updateCategories",value:function(){this.coreService.updateCategories(this.controls,this.Categories)}},{key:"initializeControls",value:function(e){this.controls=this.formService.getControls(e,this.Settings,this.isAdmin),this.updateCategories()}},{key:"SubmitForm",value:function(e){var t=this;if(this.isActionGranded){this.showLoader=!0;var i="Added";this.RecordID>0&&(e.id=this.RecordID,i="Updated"),e.userid=this.Auth.User.id,e.categories=this.coreService.returnSelectedCategoryArray(e.categories),e.isadmin=this.isAdmin,this.dataService.AddRecord(e).subscribe((function(e){"error"===e.status?t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}):(t.coreActions.Notify({title:"Record "+i+" Successfully",text:"",css:"bg-success"}),t.actions.reloadList(),t.router.navigate(t.isAdmin?[t.route_path]:[t.route_path+"profile/"+t.coreService.encrypt(e.record.id)])),t.showLoader=!1}),(function(e){t.showLoader=!1,t.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Mb(l.a),d.Mb(u.a),d.Mb(h.a),d.Mb(b.a),d.Mb(p.a),d.Mb(f.a),d.Mb(v.a),d.Mb(m.a),d.Mb(f.c),d.Mb(r.a))},e.\u0275cmp=d.Gb({type:e,selectors:[["app-qa-process"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[d.yb([r.a,a.a,n.a])],decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(e,t){1&e&&(d.Ec(0,y,3,0,"div",0),d.Ec(1,w,10,3,"div",0)),2&e&&(d.nc("ngIf",!t.isAccessGranted),d.zb(1),d.nc("ngIf",t.isAccessGranted))},directives:[g.o,S.a,A.a],encapsulation:2,data:{animation:[c.a]}}),Object(s.a)([Object(o.e)(["qa","categories"])],e.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["categories","dropdown_categories"])],e.prototype,"dropdown_categories$",void 0),Object(s.a)([Object(o.e)(["qa","isloaded"])],e.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["qa","settings"])],e.prototype,"settings$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],e.prototype,"auth$",void 0),e}()},eYWs:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var s=i("mrSG"),o=i("Usal"),r=i("pdjO"),a=i("fXoL"),n=i("ZHT1"),c=i("jyKJ"),d=i("nD3/"),l=i("Hjmt"),u=i("LEd3"),h=i("mbCC"),b=i("tyNb"),p=i("ofXK"),f=i("/H0e"),v=i("4HLj"),m=i("YJke");function g(e,t){1&e&&(a.Sb(0,"div"),a.Sb(1,"h2",3),a.Gc(2,"Access Denied"),a.Rb(),a.Rb())}function S(e,t){if(1&e){var i=a.Tb();a.Sb(0,"div"),a.Sb(1,"div",4),a.Sb(2,"div",5),a.Sb(3,"app-navigation-v2",6),a.ec("Action",(function(e){return a.xc(i),a.gc(2).toolbaraction(e)}))("SearchSelection",(function(e){return a.xc(i),a.gc(2).FindRecords(e)})),a.Rb(),a.Rb(),a.Sb(4,"div",7),a.Sb(5,"app-toolbar-v2",8),a.ec("Action",(function(e){return a.xc(i),a.gc(2).toolbaraction(e)}))("SelectAllCard",(function(e){return a.xc(i),a.gc(2).selectAll(e)})),a.Rb(),a.Sb(6,"div",9),a.Sb(7,"app-qa-list",10),a.ec("View",(function(e){return a.xc(i),a.gc(2).toolbaraction(e)}))("SelectedItems",(function(e){return a.xc(i),a.gc(2).getSelectedItems(e)})),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){var s=a.gc(2);a.zb(3),a.nc("isAdmin",s.isAdmin)("FilterOptions",s.FilterOptions)("Options",s.SearchOptions),a.zb(2),a.nc("isAdmin",s.isAdmin)("Options",s.ToolbarOptions)("isItemsSelected",s.isItemsSelected),a.zb(2),a.nc("route_path",s.route_path)("PublicView",s.PublicView)("type",s.type)("isAdmin",s.isAdmin)("isActionGranded",s.isActionGranded)}}function A(e,t){if(1&e&&(a.Sb(0,"div",2),a.Ec(1,g,3,0,"div",1),a.Ec(2,S,8,11,"div",1),a.Rb()),2&e){var i=a.gc();a.zb(1),a.nc("ngIf",!i.isAccessGranted),a.zb(1),a.nc("ngIf",i.isAccessGranted)}}function y(e,t){if(1&e){var i=a.Tb();a.Sb(0,"div"),a.Sb(1,"app-navigation-v2",6),a.ec("Action",(function(e){return a.xc(i),a.gc().toolbaraction(e)}))("SearchSelection",(function(e){return a.xc(i),a.gc().FindRecords(e)})),a.Rb(),a.Sb(2,"div",2),a.Sb(3,"div",9),a.Sb(4,"div",11),a.Sb(5,"app-toolbar-v2",8),a.ec("Action",(function(e){return a.xc(i),a.gc().toolbaraction(e)}))("SelectAllCard",(function(e){return a.xc(i),a.gc().selectAll(e)})),a.Rb(),a.Rb(),a.Sb(6,"app-qa-list",12),a.ec("View",(function(e){return a.xc(i),a.gc().toolbaraction(e)}))("SelectedItems",(function(e){return a.xc(i),a.gc().getSelectedItems(e)})),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&e){var s=a.gc();a.zb(1),a.nc("isAdmin",s.isAdmin)("FilterOptions",s.FilterOptions)("Options",s.SearchOptions),a.zb(4),a.nc("isAdmin",s.isAdmin)("Options",s.ToolbarOptions)("isItemsSelected",s.isItemsSelected),a.zb(1),a.nc("route_path",s.route_path)("PublicView",s.PublicView)("type",s.type)("isAdmin",s.isAdmin)}}var O=function(){var e=function(){function e(t,i,s,o,r,a,n,c){_classCallCheck(this,e),this.settingService=t,this.dataService=i,this.coreService=s,this.permission=o,this.coreActions=r,this.actions=a,this.router=n,this.route=c,this.isAdmin=!0,this.reload=!1,this.type=0,this.PublicView=!1,this.route_path="/qa/",this.isAccessGranted=!1,this.isActionGranded=!1,this.heading="QA",this.subheading="Management",this.IsLoaded=!1,this.User={},this.isItemsSelected=!1,this.Records=0,this.Pagination={},this.showReportLink=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.auth$.subscribe((function(t){if(e.User=t.User,e.isAdmin){e.permission.GrandResourceAccess(!1,"1521395965196","1521396022188",t.Role)&&(e.isAccessGranted=!0,e.permission.GrandResourceAction("1521395965196",t.Role)&&(e.isActionGranded=!0))}else e.isAccessGranted=!0,e.isActionGranded=!0})),this.SearchOptions=this.settingService.getSearchOptions(this.isAdmin),this.ToolbarOptions=this.settingService.getToolbarOptions(this.type,this.isAdmin),this.filteroptions$.subscribe((function(t){e.FilterOptions=t,e.reload?e.loadRecords(t):t.track_filter&&(e.loadRecords(t),t.track_filter=!1,e.actions.updateFilterOptions(t))})),this.isItemSelected$.subscribe((function(t){e.isItemsSelected=t})),this.records$.subscribe((function(t){e.Records=t})),this.pagination$.subscribe((function(t){e.Pagination=t})),this.categories$.subscribe((function(t){var i=!0,s=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(i=(r=a.next()).done);i=!0){var n=r.value;e.SearchOptions.categories.push({key:n.id,value:n.title})}}catch(c){s=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(s)throw o}}})),this.route.params.subscribe((function(t){void 0!==t.tagname&&(e.FilterOptions.tags=t.tagname,e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions)),void 0!==t.catname&&(e.FilterOptions.categoryname=t.catname,e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions)),void 0!==t.uname&&(e.FilterOptions.userid=t.uname,e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions)),void 0!==t.abuse&&("abuse"===t.abuse?(e.FilterOptions.loadabusereports=!0,e.showReportLink=!0):"normallist"===t.abuse&&(e.FilterOptions.loadabusereports=!1,e.showReportLink=!1),e.FilterOptions.track_filter=!0,e.actions.updateFilterOptions(e.FilterOptions))})),this.isloaded$.subscribe((function(t){e.IsLoaded=t,!t||e.reload?e.loadRecords(e.FilterOptions):e.refreshStats()}))}},{key:"loadRecords",value:function(e){switch(this.type){case 0:e.loadliked=!1,e.loadfavorites=!1,e.loadanswers=!1;break;case 1:void 0!==e.userid&&""!==e.userid&&(e.loadfavorites=!0,e.loadliked=!1,e.loadanswers=!1);break;case 2:void 0!==e.userid&&""!==e.userid&&(e.loadliked=!0,e.loadfavorites=!1,e.loadanswers=!1);break;case 2:void 0!==e.userid&&""!==e.userid&&(e.loadanswers=!0,e.loadliked=!1,e.loadfavorites=!1)}this.coreService.renderAbuseReportBtn(this.SearchOptions.actions,e.loadabusereports),this.PublicView&&(e.ispublic=!0),this.dataService.LoadRecords(e)}},{key:"selectAll",value:function(e){this.actions.selectAll({type:this.type,checked:e})}},{key:"toolbaraction",value:function(e){switch(e.action){case"add":return void this.router.navigate([this.route_path+"process/0"]);case"abuse":return void this.router.navigate([this.route_path+"filter/abuse"]);case"normallist":return void this.router.navigate([this.route_path+"filter/normallist"]);case"reports":return void this.router.navigate([this.route_path+"reports"]);case"m_markas":return void this.ProcessActions(e.value);case"f_type":this.actions.applyFilter({attr:"type",value:e.value});break;case"f_isapproved":this.actions.applyFilter({attr:"isapproved",value:e.value});break;case"f_status":this.actions.applyFilter({attr:"isenabled",value:e.value});break;case"f_adult":this.actions.applyFilter({attr:"isadult",value:e.value});break;case"pagesize":this.actions.applyFilter({attr:"pagesize",value:e.value});break;case"m_filter":this.actions.applyFilter({attr:"datefilter",value:e.value});break;case"sort":this.actions.applyFilter({attr:"direction",value:e.value})}}},{key:"FindRecords",value:function(e){var t=e.filters;t.tags="",t.userid="",t.pagenumber=1,t.track_filter=!0,this.actions.updateFilterOptions(t)}},{key:"getSelectedItems",value:function(e){this.SelectedItems=e,this.isItemsSelected=this.SelectedItems.length>0}},{key:"ProcessActions",value:function(e){if(this.isActionGranded){if(this.SelectedItems.length>0){var t=!0,i=!1,s=void 0;try{for(var o,r=this.SelectedItems[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var a=o.value;a.actionstatus=e.actionstatus,this.type>0&&(a.userid=this.User.id)}}catch(n){i=!0,s=n}finally{try{t||null==r.return||r.return()}finally{if(i)throw s}}this.dataService.ProcessActions(this.SelectedItems,e,0)}}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}},{key:"refreshStats",value:function(){this.actions.refresh_pagination({type:this.type,totalrecords:this.Records,pagesize:this.FilterOptions.pagesize}),this.coreActions.refreshListStats({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize,pagenumber:this.Pagination.currentPage})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Mb(n.a),a.Mb(c.a),a.Mb(d.a),a.Mb(l.a),a.Mb(u.a),a.Mb(h.a),a.Mb(b.c),a.Mb(b.a))},e.\u0275cmp=a.Gb({type:e,selectors:[["app-qa-mainlist"]],hostVars:1,hostBindings:function(e,t){2&e&&a.Kc("@fadeInAnimation",void 0)},inputs:{isAdmin:"isAdmin",reload:"reload",type:"type",PublicView:"PublicView",route_path:"route_path"},decls:2,vars:2,consts:[["class","card",4,"ngIf"],[4,"ngIf"],[1,"card"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-3"],[3,"isAdmin","FilterOptions","Options","Action","SearchSelection"],[1,"col-md-9"],[3,"isAdmin","Options","isItemsSelected","Action","SelectAllCard"],[1,"card-body"],[3,"route_path","PublicView","type","isAdmin","isActionGranded","View","SelectedItems"],[1,"m-b-20"],[3,"route_path","PublicView","type","isAdmin","View","SelectedItems"]],template:function(e,t){1&e&&(a.Ec(0,A,3,2,"div",0),a.Ec(1,y,7,10,"div",1)),2&e&&(a.nc("ngIf",t.isAdmin),a.zb(1),a.nc("ngIf",!t.isAdmin))},directives:[p.o,f.a,v.a,m.a],encapsulation:2,data:{animation:[r.a]}}),Object(s.a)([Object(o.e)(["qa","filteroptions"])],e.prototype,"filteroptions$",void 0),Object(s.a)([Object(o.e)(["qa","categories"])],e.prototype,"categories$",void 0),Object(s.a)([Object(o.e)(["qa","itemsselected"])],e.prototype,"isItemSelected$",void 0),Object(s.a)([Object(o.e)(["qa","isloaded"])],e.prototype,"isloaded$",void 0),Object(s.a)([Object(o.e)(["users","auth"])],e.prototype,"auth$",void 0),Object(s.a)([Object(o.e)(["qa","records"])],e.prototype,"records$",void 0),Object(s.a)([Object(o.e)(["qa","pagination"])],e.prototype,"pagination$",void 0),e}()}}]);