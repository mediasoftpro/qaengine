(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"7NWl":function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var r=s("5zJ1"),i=s("UIv2"),o=s("LEd3"),n=s("fXoL"),a=s("l7P3"),c=s("zwrK"),l=s("tk/3"),d=s("nD3/");let h=(()=>{class e{constructor(e,t,s,r){this._store=e,this.settings=t,this.http=s,this.coreService=r}LoadRecords(e){const t=this.settings.getApiOptions().load;this._store.dispatch(new r.j({})),this.http.post(t,JSON.stringify(e)).subscribe(t=>{this.coreService.attachEncryptedId(t.posts),this._store.dispatch(new r.k(t)),this._store.dispatch(new o.d({totalrecords:t.records,pagesize:e.pagesize,pagenumber:e.pagenumber}))},e=>{this._store.dispatch(new r.i(e))})}LoadSmListReducer(e){const t=this.settings.getApiOptions().load;this._store.dispatch(new i.u({})),this.http.post(t,JSON.stringify(e)).subscribe(e=>{this.coreService.attachEncryptedId(e.posts),this._store.dispatch(new i.v(e))},e=>{this._store.dispatch(new i.q(e))})}GenerateSummaryReport(e){const t=this.settings.getApiOptions().generate_report;this._store.dispatch(new i.s({})),this.http.post(t,JSON.stringify(e)).subscribe(e=>{let t=this.coreService.initializeChartData(e.data.dataTable,e.data.chartType);this._store.dispatch(new i.t(t))},e=>{this._store.dispatch(new i.r(e))})}AddRecord(e){let t="";switch(e.viewType){case 1:case 2:t=this.settings.getApiOptions().proc;break;case 3:t=this.settings.getApiOptions().cemail;break;case 4:t=this.settings.getApiOptions().chpass;break;case 5:t=this.settings.getApiOptions().ctype}return 2===e.viewType?(e.settings.userid=e.id,e.account.userid=e.id,this.http.post(t,JSON.stringify({id:e.id,firstname:e.firstname,lastname:e.lastname,mobile:e.mobile,phoneNumber:e.phoneNumber,attr_values:e.attr_values,settings:e.settings,account:e.account,isadmin:!0}))):this.http.post(t,JSON.stringify(e))}UpdateThumb(e,t){const s=this.settings.getApiOptions().updatethumb,i={};i.Id=e.id;for(const r of t)i.picturename=r.fname;this.http.post(s,JSON.stringify(i)).subscribe(e=>{"error"===e.status?this._store.dispatch(new o.c({title:e.message,text:"",css:"bg-danger"})):(this._store.dispatch(new r.c(e.record)),this._store.dispatch(new o.c({title:"Photo updated successfully",text:"",css:"bg-success"})))},e=>{this._store.dispatch(new o.c({title:e,text:"",css:"bg-danger"}))})}UpdateAvator(e){const t=this.settings.getApiOptions().updateavator;this.http.post(t,JSON.stringify(e)).subscribe(e=>{"error"===e.status?this._store.dispatch(new o.c({title:e.message,text:"",css:"bg-danger"})):(this._store.dispatch(new r.c(e.record)),this._store.dispatch(new o.c({title:"Photo updated successfully",text:"",css:"bg-success"})))},e=>{this._store.dispatch(new o.c({title:e,text:"",css:"bg-danger"}))})}GetInfo(e){const t=this.settings.getApiOptions().getinfo;return this.http.post(t,JSON.stringify({id:e}))}LoadReports(e){return this.http.post(this.settings.getApiOptions().load_reports,JSON.stringify(e))}Authenticate(e){const t=this.settings.getApiOptions().authenticate;return this.http.post(t,JSON.stringify(e))}UpdateRole(e){const t=this.settings.getApiOptions().updaterole;return this.http.post(t,JSON.stringify(e))}GetUserLog(e){const t=this.settings.getApiOptions().userlog;return this.http.post(t,JSON.stringify({userid:e}))}DeleteAccount(e){const t=this.settings.getApiOptions().archive;return this.http.post(t,JSON.stringify(e))}DeleteRecord(e,t){e.actionstatus="delete";const s=[];s.push(e),this.ProcessActions(s,"delete")}ProcessActions(e,t){this._store.dispatch(new r.g({SelectedItems:e,isenabled:t}));const s=[];for(const r of e)s.push({id:r.id,actionstatus:r.actionstatus});this.http.post(this.settings.getApiOptions().action,JSON.stringify(s)).subscribe(e=>{let s="Operation Performed";"delete"===t&&(s="Record Removed"),this._store.dispatch(new o.c({title:s,text:"",css:"bg-success"}))},e=>{this._store.dispatch(new o.c({title:"Error Occured",text:"",css:"bg-danger"}))})}ProcessLogActions(e,t){this._store.dispatch(new o.c({title:"Feature not yet implemented",text:"",css:"bg-success"}))}}return e.\u0275fac=function(t){return new(t||e)(n.Yb(a.h),n.Yb(c.a),n.Yb(l.b),n.Yb(d.a))},e.\u0275prov=n.Gb({token:e,factory:e.\u0275fac}),e})()},SoHB:function(e,t,s){"use strict";s.r(t),s.d(t,"LoginModule",(function(){return S}));var r=s("ofXK"),i=s("3Pt+"),o=s("tyNb"),n=s("LEd3"),a=s("5zJ1"),c=s("zwrK"),l=s("7NWl"),d=s("pz8m"),h=s("pdjO"),u=s("b6Qw"),p=s("fXoL"),m=s("l7P3"),g=s("nD3/"),b=s("RDfn"),w=s("+kG/");function f(e,t){1&e&&p.Lb(0,"app-loader")}function y(e,t){if(1&e){const e=p.Rb();p.Qb(0,"dynamic-modal-form",7),p.bc("OnSubmit",(function(t){return p.uc(e),p.dc().SubmitForm(t)})),p.Pb()}if(2&e){const e=p.dc();p.kc("controls",e.controls)("showLoader",e.showLoader)("showCancel",!1)("showModal",!1)("submitText",e.submitText)("submitCss",e.submitCss)}}let v=(()=>{class e{constructor(e,t,s,r,i,o,n){this._store=e,this.settingService=t,this.dataService=s,this.coreService=r,this.formService=i,this.router=o,this.cookieService=n,this.controls=[],this.showLoader=!1,this.submitText="Login",this.submitCss="btn btn-info btn-lg btn-block text-uppercase "}ngOnInit(){this.controls=this.formService.getLoginControls({username:"",password:"",rememberme:!1})}SubmitForm(e){this.showLoader=!0,console.log(e),this.dataService.Authenticate(e).subscribe(t=>{if("error"===t.status)this._store.dispatch(new n.c({title:t.message,text:"",css:"bg-danger"}));else{void 0===t.user&&this._store.dispatch(new n.c({title:"User Missing",text:"",css:"bg-danger"})),this._store.dispatch(new n.c({title:"Authenticated...",text:"",css:"bg-success"}));const s={userid:t.user.userid,username:t.user.username,email:t.user.email,picturename:t.user.img_url,firstname:t.user.firstname,lastname:t.user.lastname};e.rememberme&&this.cookieService.set("_AUTH",JSON.stringify(s)),this._store.dispatch(new a.a(!0)),this.router.navigate(["dashboard"])}this.showLoader=!1},e=>{this.showLoader=!1,this._store.dispatch(new n.c({title:"Error Occured",text:"",css:"bg-danger"}))})}}return e.\u0275fac=function(t){return new(t||e)(p.Kb(m.h),p.Kb(c.a),p.Kb(l.a),p.Kb(g.a),p.Kb(d.a),p.Kb(o.f),p.Kb(u.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-login"]],hostVars:1,hostBindings:function(e,t){2&e&&p.Cc("@fadeInAnimation",void 0)},features:[p.wb([l.a,c.a,d.a,u.a])],decls:8,vars:2,consts:[[1,"login-register"],[1,"login-box","card"],[1,"card-body"],[1,"form-horizontal","form-material"],[1,"box-title","m-b-20"],[4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","submitCss","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","submitCss","OnSubmit"]],template:function(e,t){1&e&&(p.Qb(0,"div",0),p.Qb(1,"div",1),p.Qb(2,"div",2),p.Qb(3,"div",3),p.Qb(4,"h3",4),p.Fc(5,"Sign In"),p.Pb(),p.Dc(6,f,1,0,"app-loader",5),p.Dc(7,y,1,6,"dynamic-modal-form",6),p.Pb(),p.Pb(),p.Pb(),p.Pb()),2&e&&(p.xb(6),p.kc("ngIf",t.showLoader),p.xb(1),p.kc("ngIf",!t.showLoader))},directives:[r.u,b.a,w.a],encapsulation:2,data:{animation:[h.a]}}),e})();var _=s("o+qO");const L=[{path:"",data:{title:"Dashboard",urls:[{title:"Control Panel"}]},component:v}];let S=(()=>{class e{}return e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({factory:function(t){return new(t||e)},imports:[[i.l,r.c,_.a,o.j.forChild(L)]]}),e})()},pdjO:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var r=s("R0Ic");const i=Object(r.k)("fadeInAnimation",[Object(r.j)(":enter",[Object(r.i)({opacity:0,background:"#ff0000"}),Object(r.e)(".8s",Object(r.i)({opacity:1}))])])},pz8m:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("dNLF"),i=s("/4iV"),o=s("fXoL"),n=s("nD3/");let a=(()=>{class e{constructor(e){this.coreService=e}getControls(e,t,s=!0){switch(t){case 1:return this.CreateAccountControls(e);case 2:return this.EditProfileControls(e,s);case 3:return this.ChangeEmailControls(e,s);case 4:return this.ChangePasswordControls(e,s);case 5:return this.ChangeUserTypeControls(e)}return this.CreateAccountControls(e)}CreateAccountControls(e){const t=[],s=[];for(const r of i.b.USER_TYPES)s.push({key:r.value,value:r.title});return t.push(new r.b({key:"role_name",label:"Select Role",value:e.role_name.toString(),options:s,order:0})),t.push(new r.i({key:"firstname",label:"",value:e.firstname,placeholder:"First Name",minLength:3,maxLength:50,order:1})),t.push(new r.i({key:"lastname",label:"",value:e.lastname,placeholder:"Last Name",minLength:3,maxLength:50,order:2})),t.push(new r.i({key:"username",label:"",value:e.username,placeholder:"User Name",minLength:5,maxLength:15,required:!0,pattern:i.d.USERNAME_REGEX,order:3})),t.push(new r.i({key:"password",type:"password",label:"",value:e.password,placeholder:"Password",minLength:5,maxLength:20,required:!0,pattern:i.d.PASSWORD_REGEX,order:4})),t.push(new r.i({key:"cpassword",type:"password",label:"",placeholder:"Confirm Password",value:e.cpassword,minLength:5,maxLength:20,required:!0,order:5})),t.push(new r.i({key:"email",label:"",placeholder:"Email",value:e.email,required:!0,email:!0,order:6})),t.sort((e,t)=>e.order-t.order)}getLoginControls(e){const t=[];return t.push(new r.i({key:"username",label:"",value:e.username,placeholder:"User Name",required:!0,minLength:5,maxLength:20,order:1})),t.push(new r.i({key:"password",type:"password",label:"",value:e.password,placeholder:"Password",required:!0,minLength:5,maxLength:20,order:2})),t.push(new r.a({key:"rememberme",label:"Remember Me",value:e.rememberme,checked:e.rememberme,required:!0,order:3})),t.sort((e,t)=>e.order-t.order)}EditProfileControls(e,t=!0){const s=[];s.push(new r.i({key:"firstname",label:"First Name",value:e.firstname,placeholder:"First Name",minLength:3,maxLength:50,order:0})),s.push(new r.i({key:"lastname",label:"Last Name",value:e.lastname,placeholder:"Last Name",minLength:3,maxLength:50,order:1})),s.push(new r.i({key:"phone",label:"Phone No",value:e.phoneNumber,placeholder:"Enter Phone Number",minLength:3,maxLength:50,order:2})),s.push(new r.i({key:"mobile",label:"Mobile",value:e.mobile,placeholder:"Enter Mobile Number",minLength:3,maxLength:50,order:3}));let i=!1;if(""!==e.id&&(i=!0),this.coreService.renderDynamicControls(s,e.options,i),t){s.push(new r.g({key:"config_section_01",label:"Settings",order:1001}));let t=!1;1===e.settings.isemail&&(t=!0),s.push(new r.a({key:"isemail",label:"Receiving Emails",value:e.settings.isemail,checked:t,helpblock:"Toggle on | off receiving emails",order:1002}));let i=!1;1===e.settings.issendmessages&&(i=!0),s.push(new r.a({key:"issendmessages",label:"Receiving Messages",value:e.settings.issendmessages,checked:i,helpblock:"Toggle on | off receiving internal messages within website",order:1003})),s.push(new r.g({key:"config_section_01",label:"Account",order:1004})),s.push(new r.i({key:"basic_credits",label:"Basic Credits",value:e.account.basic_credits.toString(),colsize:"col-md-12",pattern:"[0-9]+",required:!0,helpblock:"Update user basic credits manually",order:1005})),s.push(new r.i({key:"featured_credits",label:"Featured Credits",value:e.account.featured_credits.toString(),colsize:"col-md-12",pattern:"[0-9]+",required:!0,helpblock:"Update user featured credits manually",order:1006})),s.push(new r.i({key:"premium_credits",label:"Premium Credits",value:e.account.premium_credits.toString(),colsize:"col-md-12",pattern:"[0-9]+",required:!0,helpblock:"Update user premium credits manually",order:1007})),s.push(new r.i({key:"hot_credits",label:"Hot Credits",value:e.account.hot_credits.toString(),colsize:"col-md-12",pattern:"[0-9]+",required:!0,helpblock:"Update user hot credits manually",order:1008})),s.push(new r.i({key:"super_hot_credits",label:"Super Hot Credits",value:e.account.super_hot_credits.toString(),colsize:"col-md-12",pattern:"[0-9]+",required:!0,helpblock:"Update user super hot credits manually",order:1009}))}return s.sort((e,t)=>e.order-t.order)}ChangeEmailControls(e,t=!0){const s=[];return s.push(new r.i({key:"email",label:"Email Address",placeholder:"Email",value:e.email,required:!0,email:!0,order:0})),t||s.push(new r.i({key:"password",type:"password",pattern:i.d.PASSWORD_REGEX,label:"",placeholder:"Password",value:e.password,minLength:5,maxLength:20,required:!0,order:1})),s.sort((e,t)=>e.order-t.order)}ChangePasswordControls(e,t=!0){const s=[];return t||s.push(new r.i({key:"opassword",type:"password",label:"Current Password",value:e.opassword,placeholder:"Old Password",minLength:5,maxLength:20,required:!0,order:0})),s.push(new r.i({key:"password",type:"password",label:"New Password",value:e.password,placeholder:"Password",minLength:5,maxLength:20,required:!0,pattern:i.d.PASSWORD_REGEX,order:4})),s.push(new r.i({key:"cpassword",type:"password",label:"Confirm Password",placeholder:"Confirm Password",value:e.cpassword,minLength:5,maxLength:20,required:!0,order:5})),s.sort((e,t)=>e.order-t.order)}ChangeUserTypeControls(e){const t=[],s=[];for(const r of i.b.USER_TYPES)s.push({key:r.value,value:r.title});return t.push(new r.b({key:"role_name",label:"Select Role",value:e.role_name,options:s,order:0})),t.sort((e,t)=>e.order-t.order)}}return e.\u0275fac=function(t){return new(t||e)(o.Yb(n.a))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac}),e})()}}]);